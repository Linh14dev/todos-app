const taskList=document.querySelector(".task-list"),addTask=document.querySelector(".add-task"),updateTask=document.querySelector(".update-task"),buttonGroup=document.querySelector(".buttons"),task=document.querySelector("#task");function loadTask(e){let t=document.createElement("li");t.className="task-item";let a=document.querySelectorAll(".task-item").length,l=`\n    <input onclick="toggle(this)" type="checkbox" id="task-${a}">\n    <label for="task-${a}" class="task-title">${e}</label>\n    <i onclick="moveUp(this)" class='bx bx-up-arrow-alt move'></i>\n    <i onclick="moveDown(this)"\n    class='bx bx-down-arrow-alt move'></i>\n    <i onclick="editTask(this)" class='bx bxs-pencil edit'></i>\n    <i onclick="deleteTask(this)" class='bx bx-plus delete'></i>\n    `;return t.innerHTML=l,t}function toggle(e){e.parentElement.classList.toggle("disable")}function deleteTask(e){e.parentElement.remove()}function editTask(e){let t=e.parentElement.querySelector("label");task.value=t.textContent,task.focus(),removeEditState(),buttonGroup.classList.add("update"),t.classList.add("updating")}function moveDown(e){let t=e.parentElement,a=t.nextElementSibling,l=t.querySelector("label"),n=a.querySelector("label"),s=l.textContent,o=t.className;swap(l,n,s,"textContent"),swap(t,a,o)}function moveUp(e){let t=e.parentElement,a=t.previousElementSibling,l=t.className,n=t.querySelector("label");swap(n,a.querySelector("label"),n.textContent,"textContent"),swap(t,a,l)}function swap(e,t,a,l="className"){"className"!==l&&"textContent"!==l||(e[l]=t[l],t[l]=a)}function removeEditState(){document.querySelectorAll(".task-title").forEach(e=>{e.classList.remove("updating")})}addTask.addEventListener("click",()=>{let e=task.value;if(e){let t=loadTask(e);taskList.appendChild(t)}task.value="",task.focus()}),updateTask.addEventListener("click",()=>{let e=task.value,t=document.querySelector(".updating");e&&e!==t.textContent&&(t.textContent=e),t.classList.remove("updating"),buttonGroup.classList.remove("update"),task.value="",task.focus()}),document.addEventListener("keypress",e=>{let t=document.querySelector(".buttons.update");"Enter"!==e.code&&"NumpadEnter"!==e.code||(t?updateTask.click():addTask.click())});